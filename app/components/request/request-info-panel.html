<div id="request-info-panel">
    <!-- Timeline formatter and concept ids.extension input -->
    <div class="row">
        <div class="col col-md-12">
            <ul class="timeline">
                <li>
                    <div class="timeline-badge">
                        <i class="icon-circle theme-border"></i>
                    </div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <label class="control-label" translate="crs.request.details.info.label.batchId" title="{{'tooltips.request.details.info.label.batchId' | translate}}"></label>
                            <h4 class="timeline-title">{{(requestVM.request.batchRequest)?requestVM.request.batchRequest:'N/A'}}</h4>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="timeline-badge">
                        <i class="icon-circle theme-border"></i>
                    </div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <label class="control-label" translate="crs.request.details.info.label.originator" title="{{'tooltips.request.details.info.label.originator' | translate}}"></label>
                            <h4 class="timeline-title">
                                <span ng-show="!requestVM.authors" class="md md-autorenew" ng-class="{'md-spin':!requestVM.authors}"></span>
                                <span class="author" ng-if="requestVM.authors" ng-bind-html="(requestVM.getAuthorName(requestVM.request.requestHeader.ogirinatorId))?requestVM.getAuthorName(requestVM.request.requestHeader.ogirinatorId):requestVM.request.requestHeader.ogirinatorId"></span>
                            </h4>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="timeline-badge">
                        <i class="icon-circle theme-border"></i>
                    </div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <label class="control-label" translate="crs.request.details.info.label.manager" title="{{'tooltips.request.details.info.label.manager' | translate}}"></label>
                            <h4 class="timeline-title">
                                <span ng-show="!requestVM.staffs" class="md md-autorenew" ng-class="{'md-spin':!requestVM.staffs}"></span>
                                <span ng-bind-html="(requestVM.getStaffName(requestVM.request.requestHeader.manager))?requestVM.getStaffName(requestVM.request.requestHeader.manager):requestVM.request.requestHeader.manager"></span>
                            </h4>
                        </div>
                    </div>
                </li>
                <li ng-if="requestVM.request.authoringTaskTicket">
                    <div class="timeline-badge">
                        <i class="icon-circle theme-border"></i>
                    </div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <label class="control-label" translate="crs.request.details.info.label.authoringTicket" title="{{'tooltips.request.details.info.label.authoringTicket' | translate}}"></label>
                             <h4 class="timeline-title">{{requestVM.request.authoringTaskTicket}}</h4>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="timeline-badge">
                        <i class="icon-circle theme-border"></i>
                    </div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <label class="control-label" translate="crs.request.details.info.label.createdDate" title="{{'tooltips.request.details.info.label.createdDate' | translate}}"></label>
                            <h4 class="timeline-title">{{requestVM.request.requestHeader.requestDate | date:'yyyy-MM-dd'}}</h4>
                        </div>
                    </div>
                </li>
                <li ng-if="requestVM.request.jiraTicketId">
                    <div class="timeline-badge">
                        <i class="icon-circle theme-border"></i>
                    </div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <label class="control-label" translate="crs.request.details.info.label.ticketId" title="{{'tooltips.request.details.info.label.ticketId' | translate}}"></label>
                            <h4 class="timeline-title" jira-link="requestVM.request.jiraTicketId"></h4>
                        </div>
                    </div>
                </li>
                <li ng-if="requestVM.request.contentTrackerUrl">
                    <div class="timeline-badge">
                        <i class="icon-circle theme-border"></i>
                    </div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <label class="control-label" translate="crs.request.details.info.label.requestUrl" title="{{'tooltips.request.details.info.label.requestUrl' | translate}}"></label>
                            <h4 class="timeline-title comment-body">{{requestVM.request.contentTrackerUrl}}</h4>
                        </div>
                    </div>
                </li>
                <li ng-if="requestVM.request.requestHeader.statusDate">
                    <div class="timeline-badge">
                        <i class="icon-circle theme-border"></i>
                    </div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <label class="control-label" translate="crs.request.details.info.label.lastModified" title="{{'tooltips.request.details.info.label.lastModified' | translate}}"></label>
                            <h4 class="timeline-title">{{requestVM.request.requestHeader.statusDate | date:'yyyy-MM-dd'}}</h4>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="timeline-badge">
                        <i class="icon-circle theme-border"></i>
                    </div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <label class="control-label" translate="crs.request.details.info.label.status" title="{{'tooltips.request.details.info.label.status' | translate}}"></label>
                            <h4 class="timeline-title">
                                <span class="badge requestStatus {{requestVM.request.requestHeader.status}}" title="{{requestVM.request.requestHeader.status | requestStatus | translate}}">{{requestVM.request.requestHeader.status | requestStatus | translate}}</span>
                            </h4>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <hr>
    <hr style="width:93%; border-color:#ddd">
    <div class="request-info">
        <div ng-if="requestVM.permissionChecked && (requestVM.pageMode.value === 'new' || requestVM.pageMode.value === 'edit' || (requestVM.pageMode.value === 'preview' && requestVM.isAdmin))" style="padding: 15px; width: 100%" class="classification-btn">
            <!-- Edit request -->
            <button ng-if="requestVM.pageMode.value === 'new' || requestVM.pageMode.value === 'edit'" ng-disabled="requestVM.request.requestHeader.status !== 'DRAFT'" class="btn btn-default blue darken-1 promote" style="text-transform: none" ng-click="requestVM.saveRequest()" title="{{'tooltips.request.details.info.button.save' | translate}}">
                <span class="md md-save blue darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.save"></span>
            </button>
            <button ng-if="requestVM.pageMode.value === 'new' || requestVM.pageMode.value === 'edit'" ng-disabled="requestVM.request.requestHeader.status !== 'DRAFT'" class="btn btn-default green darken-1 " style="text-transform: none" ng-click="requestVM.saveAndSubmitRequest()" title="{{'tooltips.request.details.info.button.submit' | translate}}">
                <span class="md md-send green darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.submit"></span>
            </button>
            <button ng-if="requestVM.pageMode.value === 'edit' && requestVM.request.requestHeader.status === 'REJECTED'" class="btn btn-default brown darken-1 appeal" style="text-transform: none" ng-click="requestVM.appealRequest()" title="{{'tooltips.request.details.info.button.appeal' | translate}}">
                <span class="md md-forum brown darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.appeal"></span>
            </button>
            <button ng-if="requestVM.pageMode.value === 'edit' && (requestVM.request.requestHeader.status === 'NEW' || requestVM.request.requestHeader.status === 'ACCEPTED'|| requestVM.request.requestHeader.status === 'APPEAL' || requestVM.request.requestHeader.status === 'CLARIFICATION_NEEDED')" ng-disabled="requestVM.requestOwner !== requestVM.request.requestHeader.ogirinatorId && requestVM.requestOwner !== requestVM.request.requestHeader.requestorId" class="btn btn-default orange darken-1 withdraw" style="text-transform: none" ng-click="requestVM.withdrawRequest()" title="{{'tooltips.request.details.info.button.withdraw' | translate}}">
                <span class="md md-backspace orange darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.withdraw"></span>
            </button>
            
            <!-- Preview request -->
            <!-- <button ng-if="requestVM.pageMode.value === 'preview'" ng-disabled="requestVM.request.requestHeader.status !== 'NEW' && requestVM.request.requestHeader.status !== 'APPEAL' && requestVM.request.requestHeader.status !== 'CLARIFICATION_NEEDED' && requestVM.request.requestHeader.status !== 'IN_INCEPTION_ELABORATION'" class="btn btn-default blue darken-1 promote" style="text-transform: none" ng-click="requestVM.acceptRequest()">
                <span class="md md-done blue darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.accept"></span>
            </button> -->
            <button ng-if="requestVM.pageMode.value === 'preview' && requestVM.request.requestType === 'NEW_CONCEPT'" class="btn btn-default blue darken-1 promote" style="text-transform: none" ng-click="requestVM.changeLocalCode()" title="{{'tooltips.request.details.info.button.changeLocalCode' | translate}}">
                <span class="md md-credit-card blue darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.changeLocalCode"></span>
            </button>
            <button ng-if="requestVM.pageMode.value === 'preview' && (requestVM.request.requestHeader.status === 'ACCEPTED' || requestVM.request.requestHeader.status === 'NEW' || requestVM.request.requestHeader.status === 'APPEAL' || requestVM.request.requestHeader.status === 'CLARIFICATION_NEEDED')" class="btn btn-default blue darken-1 promote" style="text-transform: none" ng-click="requestVM.moveToInInceptionElaboration()" title="{{'tooltips.request.details.info.button.moveToInInceptionElaboration' | translate}}">
                <span class="md md-done blue darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.moveToInInceptionElaboration"></span>
            </button>
            <button ng-if="requestVM.pageMode.value === 'preview' && requestVM.request.requestHeader.status !== 'ACCEPTED' && requestVM.request.requestHeader.status !== 'UNDER_AUTHORING' && requestVM.request.requestHeader.status !== 'RELEASED' && requestVM.request.requestHeader.status !== 'READY_FOR_RELEASE'" ng-disabled="!requestVM.projects || !requestVM.authors" class="btn btn-default blue darken-1 promote" style="text-transform: none" ng-click="requestVM.acceptRequest()" title="{{'tooltips.request.details.info.button.accept' | translate}}">
                <span class="md md-done blue darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.accept"></span>
            </button>
            
            <button ng-if="requestVM.pageMode.value === 'preview' && requestVM.request.requestHeader.status !== 'RELEASED'" ng-disabled="!requestVM.projects || !requestVM.authors" class="btn btn-default blue darken-1 promote" style="text-transform: none" ng-click="requestVM.assignRequestToStaff(requestVM.request.requestHeader.status)" title="{{'tooltips.request.details.info.button.assignToStaff' | translate}}">
                <span class="md md-assignment-ind blue darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.assignToStaff"></span>
            </button>

            <button ng-if="requestVM.pageMode.value === 'preview' && requestVM.request.requestHeader.status !== 'RELEASED'" ng-disabled="!requestVM.projects || !requestVM.authors" class="btn btn-default blue darken-1 promote" style="text-transform: none" ng-click="requestVM.reassignToRequestor(requestVM.request.requestHeader.status)" title="{{'tooltips.request.details.info.button.reassignToRequestor' | translate}}">
                <span class="md md-recent-actors blue darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.reassignToRequestor"></span>
            </button>

            <button ng-if="requestVM.pageMode.value === 'preview' && (requestVM.request.requestHeader.status === 'NEW' || requestVM.request.requestHeader.status === 'APPEAL' || requestVM.request.requestHeader.status === 'CLARIFICATION_NEEDED' || requestVM.request.requestHeader.status === 'IN_INCEPTION_ELABORATION') && !requestVM.request.authoringTaskTicket" ng-disabled="!requestVM.projects || !requestVM.authors" class="btn btn-default blue darken-1 promote" style="text-transform: none" ng-click="requestVM.acceptAndAssignRequest()" title="{{'tooltips.request.details.info.button.acceptAndAssign' | translate}}">
                <span class="md md-assignment-turned-in blue darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.acceptAndAssign"></span>
            </button>

            <button ng-if="requestVM.pageMode.value === 'preview' && requestVM.request.requestHeader.status === 'ACCEPTED' && !requestVM.request.authoringTaskTicket" ng-disabled="!requestVM.projects || !requestVM.authors" ng-disabled="requestVM.request.requestHeader.assignedProject" class="btn btn-default blue darken-1 promote" style="text-transform: none" ng-click="requestVM.assignRequest()" title="{{'tooltips.request.details.info.button.assign' | translate}}">
                <span class="md md-content-paste blue darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.assign"></span>
            </button>

            <button ng-if="requestVM.pageMode.value === 'preview' && requestVM.request.authoringTaskTicket" ng-disabled="!requestVM.projects || !requestVM.authors" class="btn btn-default pink1 darken-1 review" style="text-transform: none" title="{{'tooltips.request.details.info.button.unassign' | translate}}" ng-click="requestVM.unassignSelectedRequests()">
                <span class="md md-assignment-late pink darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.unassign"></span>
            </button>

            <button ng-if="requestVM.pageMode.value === 'preview' && (requestVM.request.requestHeader.status === 'NEW' || requestVM.request.requestHeader.status === 'CLARIFICATION_NEEDED' || requestVM.request.requestHeader.status === 'ACCEPTED' || requestVM.request.requestHeader.status === 'IN_INCEPTION_ELABORATION')" ng-disabled="requestVM.request.requestHeader.status !== 'NEW' && requestVM.request.requestHeader.status !== 'APPEAL' && requestVM.request.requestHeader.status !== 'CLARIFICATION_NEEDED' && requestVM.request.requestHeader.status !== 'ACCEPTED' && requestVM.request.requestHeader.status !== 'IN_INCEPTION_ELABORATION'" class="btn btn-default deep-purple darken-1 validate" ng-click="requestVM.rejectRequest()" style="text-transform: none" title="{{'tooltips.request.details.info.button.reject' | translate}}">
                <span class="md md-dnd-forwardslash deep-purple darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.reject"></span>
            </button>

            <button ng-if="requestVM.pageMode.value === 'preview' && requestVM.request.authoringTaskTicket" ng-disabled="!requestVM.projects || !requestVM.authors" class="btn btn-default deep-purple darken-1 validate" ng-click="requestVM.unassignAndRejectRequest()" style="text-transform: none" title="{{'tooltips.request.details.info.button.unassignAndRejectRequest' | translate}}">
                <span class="md md-dnd-forwardslash deep-purple darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.unassignAndRejectRequest"></span>
            </button>

            <button ng-if="requestVM.pageMode.value === 'preview' && requestVM.request.requestHeader.status === 'APPEAL'" ng-disabled="requestVM.request.requestHeader.status !== 'NEW' && requestVM.request.requestHeader.status !== 'APPEAL'" class="btn btn-default orange darken-1 appealReject" ng-click="requestVM.rejectAppeal()" style="text-transform: none" title="{{'tooltips.request.details.info.button.appealReject' | translate}}">
                <span class="md md-dnd-forwardslash orange darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.appealReject"></span>
            </button>
			
            <button ng-if="requestVM.pageMode.value === 'preview' && requestVM.request.requestHeader.status !== 'CLARIFICATION_NEEDED' && requestVM.request.requestHeader.status !== 'IN_INCEPTION_ELABORATION' && requestVM.request.requestHeader.status !== 'UNDER_AUTHORING' && requestVM.request.requestHeader.status !== 'RELEASED' && requestVM.request.requestHeader.status !== 'READY_FOR_RELEASE'" class="btn btn-default pink1 darken-1 review" style="text-transform: none" ng-click="requestVM.requestClarification()" title="{{'tooltips.request.details.info.button.pendingForClarification' | translate}}">
                <span class="md md-mode-edit pink darken-2 iconbase"></span>
                <span class="button-link" translate="crs.request.details.info.button.pendingForClarification"></span>
            </button>
        </div>
    </div>
</div>
